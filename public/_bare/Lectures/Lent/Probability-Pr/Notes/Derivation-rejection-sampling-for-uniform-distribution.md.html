<p>
    <span class="display-math">$$ \begin{align*}
        \prob(X\in B|N=n) &amp;= \frac{\prob(U_1,\ldots,U_{n-1} \not\in A, U_n\in B\cap A)}{\prob(U_1,\ldots,U_{n-1}\not\in A,U_n\in A)} \\
        &amp;= \frac{\prob(U_1,\ldots U_{n-1}\not\in A) \prob(U_n \in B\cap A)}{\prob(U_1,\ldots,U_{n-1}\not\in A) \prob(U_n\in A)} &amp;&amp;\text{by independence} \\
        &amp;= \frac{|B\cap A|}{|A|} \\
        &amp;= \int_{B} f(x)\, dx.
    \end{align*} $$</span>
    so <span class="inline-math">$\prob(X\in B) = \int_{B} f(x) \, dx$</span>.
    Therefore by the law of total probability,
    <span class="display-math">$$ \begin{align*}
        \prob(X\in B) &amp;= \sum_{n=1}^{\infty} \prob(X\in B|N=n) \prob(N=n) \\
        &amp;= \int_{B} f(x) \, dx \sum_{n=1}^{\infty} \prob(N=n) \\
        &amp;= \int_{B} f(x)\, dx
    \end{align*} $$</span>
    so <span class="inline-math">$X$</span> has the desiered density.
</p>
